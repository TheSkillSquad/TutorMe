# Netlify Headers Configuration for TutorMe
# Comprehensive security headers for production deployment

# Global security headers for all routes
/*
  X-Frame-Options: DENY
  X-XSS-Protection: 1; mode=block
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=(), payment=(), fullscreen=()
  Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
  Cache-Control: public, max-age=31536000, immutable

# Content Security Policy for production
/*
  Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.firebase.com https://*.paypal.com https://*.google.com https://*.gstatic.com https://*.twilio.com https://*.openrouter.ai; style-src 'self' 'unsafe-inline' https://*.googleapis.com https://*.gstatic.com; img-src 'self' data: https://*.google.com https://*.gstatic.com https://*.firebase.com https://*.paypal.com https://*.twilio.com https://*.openrouter.ai blob:; font-src 'self' https://*.gstatic.com https://*.googleapis.com; connect-src 'self' https://*.firebaseio.com https://*.firebase.com https://*.paypal.com https://*.twilio.com https://*.openrouter.ai https://*.google.com wss://*.firebaseio.com; frame-src 'self' https://*.paypal.com https://*.firebase.com https://*.youtube.com https://*.vimeo.com; media-src 'self' https://*.firebase.com https://*.twilio.com; worker-src 'self' blob:; manifest-src 'self'

# API routes - less restrictive caching
/api/*
  Cache-Control: no-cache, no-store, must-revalidate
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
  Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With
  Access-Control-Max-Age: 86400

# Static assets - aggressive caching
/static/*
  Cache-Control: public, max-age=31536000, immutable
/_next/static/*
  Cache-Control: public, max-age=31536000, immutable
/images/*
  Cache-Control: public, max-age=31536000, immutable
/fonts/*
  Cache-Control: public, max-age=31536000, immutable

# Next.js specific optimizations
/_next/*
  Cache-Control: public, max-age=31536000, immutable

# Service worker
/sw.js
  Cache-Control: public, max-age=0, must-revalidate

# Web app manifest
/manifest.json
  Cache-Control: public, max-age=31536000, immutable

# Favicon and icons
/favicon.ico
  Cache-Control: public, max-age=604800
/apple-touch-icon.png
  Cache-Control: public, max-age=604800
/icon-*.png
  Cache-Control: public, max-age=604800

# SEO files
/robots.txt
  Cache-Control: public, max-age=86400
/sitemap.xml
  Cache-Control: public, max-age=86400

# Authentication routes - no caching
/auth/signin
  Cache-Control: no-cache, no-store, must-revalidate
/auth/signup
  Cache-Control: no-cache, no-store, must-revalidate
/auth/*
  Cache-Control: no-cache, no-store, must-revalidate

# Payment routes - enhanced security
/payment/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Content-Type-Options: nosniff
  X-Frame-Options: DENY

# Video session routes - enhanced security
/video/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Content-Type-Options: nosniff
  X-Frame-Options: DENY

# File upload routes
/api/upload/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Content-Type-Options: nosniff

# Error pages - no caching
/404.html
  Cache-Control: no-cache, no-store, must-revalidate
/500.html
  Cache-Control: no-cache, no-store, must-revalidate

# Maintenance page
/maintenance.html
  Cache-Control: no-cache, no-store, must-revalidate

# Health check endpoint
/api/health
  Cache-Control: no-cache, no-store, must-revalidate
  Access-Control-Allow-Origin: *

# WebSocket endpoints
/socket.io/*
  Cache-Control: no-cache, no-store, must-revalidate
  Access-Control-Allow-Origin: *

# Firebase specific headers
/firebase-messaging-sw.js
  Cache-Control: public, max-age=0, must-revalidate

# PayPal specific headers
/paypal/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Frame-Options: ALLOW-FROM https://www.paypal.com

# Twilio specific headers
/twilio/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Content-Type-Options: nosniff

# OpenRouter AI specific headers
/api/ai/*
  Cache-Control: no-cache, no-store, must-revalidate
  X-Content-Type-Options: nosniff

# Development environment headers (less restrictive)
# Note: These are not applied in production
/*
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  Cache-Control: no-cache